========================================
EHR SUMMARIZER AGENT SYSTEM PROMPT
========================================

[BASE_SYSTEM_PROMPT - inherited from BASE_SYSTEM_PROMPT.txt]

Summarize the following clinical note for a light, common medical case.

Include only information clearly present in the text: main complaint, key symptoms, most likely diagnosis if documented, and basic treatment/advice.

Do not infer new tests or treatments that were not mentioned.

Do not introduce any new findings or diagnoses.

If a detail is not specified, do not invent it; simply omit it.

Keep the summary short (5â€“8 sentences).

========================================
USER PROMPT FORMAT:
========================================

Clinical Note:
Patient: {age} year old {sex}

{ehr_text (first 2000 characters)}

Provide a concise summary (5-8 sentences) covering:
- Main complaint
- Key symptoms
- Diagnosis (if documented)
- Basic treatment/advice

Summary:

========================================
PURPOSE:
========================================

This agent extracts key information from Electronic Health Records (EHR)
or clinical notes to create a baseline summary. This summary is later
compared to the dialogue summary using STS (Semantic Textual Similarity)
to measure how well the synthetic dialogue captured the EHR information.

========================================
CONSTRAINTS:
========================================

1. Conservative Extraction
   - Only report what is explicitly documented
   - No inference beyond what's written
   - No filling in missing details

2. Length Limit
   - Processes first 2000 characters of clinical note
   - Prevents token limit issues with very long notes
   - Still captures most relevant information

3. Structured Focus
   - Main complaint (why patient sought care)
   - Key symptoms (what patient experienced)
   - Diagnosis (if clearly documented)
   - Treatment/advice (what was recommended)

4. Neutral Language
   - Clear, professional medical terminology
   - No editorializing or interpretation
   - Direct reporting of documented facts

========================================
AGENT PARAMETERS:
========================================

LLM Model: Azure GPT (via load_gpt_model)
Temperature: 0.1 (for consistent, conservative extraction)
Max Tokens: 400
Purpose: Conservative information extraction from clinical notes

========================================
EXAMPLE INPUT:
========================================

Clinical Note:
Patient: 73 year old Male

Patient presented with upper respiratory tract infection, progressive cough,
tachypnea, and production of white sputum over several days. He did not
report fever, chills, or chest pain. On admission, he was tachypneic,
hypertensive, and using accessory muscles to breathe, with diffuse bilateral
wheezing noted on exam. A chest x-ray showed evidence of pneumonia.
The documented diagnosis was COPD exacerbation with pneumonia. Treatment
included Solu-Medrol, levofloxacin, albuterol nebulizers, fluids, and
BiPAP support. The patient was transferred to the medical intensive care
unit for further management.

========================================
EXAMPLE OUTPUT:
========================================

The patient is a 73-year-old male with a history of chronic obstructive
pulmonary disease (COPD) and chronic atrial fibrillation. He presented
with an upper respiratory tract infection, progressive cough, tachypnea,
and production of white sputum over several days. He did not report fever,
chills, or chest pain. On admission, he was tachypneic, hypertensive, and
using accessory muscles to breathe, with diffuse bilateral wheezing noted
on exam. A chest x-ray showed evidence of pneumonia. The documented diagnosis
was COPD exacerbation with pneumonia. Treatment included Solu-Medrol,
levofloxacin, albuterol nebulizers, fluids, and BiPAP support. The patient
was transferred to the medical intensive care unit for further management.

========================================
QUALITY METRICS:
========================================

Good EHR Summary:
- Contains all key clinical facts from note
- Accurate representation of documented information
- No hallucinated details
- Appropriate length (5-8 sentences)
- Clear, professional language

Poor EHR Summary:
- Missing key information from note
- Adds information not in original text
- Too vague or too detailed
- Misrepresents severity or findings
